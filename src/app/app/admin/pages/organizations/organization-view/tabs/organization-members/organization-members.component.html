<p-table
  styleClass="card-table"
  [value]="members"
  dataKey="uuid"
  responsiveLayout="scroll"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Member</th>
      <th>Permissions</th>
      <th style="width: 10rem">
        <button pButton class="p-button-nano">Add Member</button>
      </th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-member>
    <tr>
      <td style="vertical-align: top;">
        <div class="flex flex-row align-items-center">
          <p-avatar
            styleClass="mr-2"
            size="large"
            [image]="member.account_picture"
          ></p-avatar>

          <div>
            <a [routerLink]="['/admin/accounts/', member.account_uuid]">{{member.account_username}}</a><br />
            {{ member.account_email }}
          </div>
        </div>
      </td>
      <td>
          <div class="flex flex-column" style="gap: 0.5rem;">
            <div class="flex flex-row flex-wrap" style="gap: 0.5rem;" *ngFor="let permission of member.account_permissions">
              <code tooltipStyleClass="w-auto">{{ permission.name }}</code>
              <p-tag [severity]="getSourceTagColor(source)" tooltipPosition="bottom" [pTooltip]="source.organization ? source.organization.name : source.account ? source.account.username : source.group ? source.group.name : null" *ngFor="let source of permission.sources">
                <div class="flex flex-column">
                    {{ getSourceName(source) }}
                </div>
              </p-tag>
            </div>
          </div>
      </td>
      <td style="width: 6rem; vertical-align: top;">
        <div class="flex flex-row justify-content-end">
          <button
            pButton
            class="p-button-icon p-button-nano"
            icon="pi pi-trash"
          ></button>
        </div>
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="emptymessage">
    <tr>
      <td colspan="5">There are no members assigned to this group yet.</td>
    </tr>
  </ng-template>
</p-table>
